copy form: https://elixir.bootlin.com/linux/latest/source/lib/test_printf.c
